{% extends "base.html" %}
{% from "_form_errors.html" import render_field_with_errors, render_form_errors %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
    <h2>{{ legend }}</h2>
    <form method="POST" action="" novalidate> {# action="" означает текущий URL #}
        {{ form.hidden_tag() }}
        {{ render_form_errors(form) }}

        <div class="form-group">
            {{ form.title.label }}
            {{ form.title(class="form-control", placeholder="Что нужно сделать?") }}
            {{ render_field_with_errors(form.title) }}
        </div>
        <div class="form-group">
            {{ form.description.label }}
            {{ form.description(class="form-control", rows="3", placeholder="Дополнительные детали...") }}
            {{ render_field_with_errors(form.description) }}
        </div>
        
        {# <!-- НОВОЕ ПОЛЕ ДЛЯ КАТЕГОРИИ --> #}
        <div class="form-group">
            {{ form.category.label }}
            {{ form.category(class="form-control", placeholder="Например: Работа, Дом, Учеба") }}
            {{ render_field_with_errors(form.category) }}
        </div>
        {# <!-- КОНЕЦ НОВОГО ПОЛЯ --> #}

        <div class="form-group">
            {{ form.due_date.label }}
            {{ form.due_date(class="form-control") }}
            {{ render_field_with_errors(form.due_date) }}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn btn-success") }}
            <a href="{{ url_for('main.index') }}" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
{% endblock %}